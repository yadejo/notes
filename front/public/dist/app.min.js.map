{"version":3,"sources":["/public/dist/app/app.ts","/public/dist/login/login.ts","/public/dist/notes/notes.ts","/public/dist/register/register.ts","/public/dist/shared/authService.ts","/public/dist/templates.ts"],"names":["angular","module","config","$stateProvider","$urlRouterProvider","state","url","template","authenticate","otherwise","run","$rootScope","$state","authService","$on","event","toState","toParams","fromState","fromParams","isLoggedIn","transitionTo","preventDefault","app","login","LoginCtrl","$scope","this","$inject","directive","templateUrl","controller","controllerAs","notes","notes_1","NotesCtrl","notesService","$http","_this","onCheck","note","noteContainer","setTimeout","isComplete","$apply","filter","n","id","addNote","newNote","content","push","Note","length","addContainer","newContainerName","container","NoteContainer","removeContainer","confirm","Array","NotesService","name","factory","register","RegisterCtrl","registerService","RegisterService","username","password","console","log","shared","AuthService","$q","localStorageService","toastr","serviceBase","loggedIn","data","deferred","defer","post","headers","Content-Type","success","response","set","token","access_token","resolve","error","logout","promise","remove","instance","$templateCache","put"],"mappings":"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","file":"app.min.js","sourcesContent":["/// <reference path=\"../../../typings/index.d.ts\" />\r\n\r\nangular.module('notesApp', [\r\n    'app.login',\r\n    'app.register',\r\n    'app.templates',\r\n    'app.notes',\r\n    'ui.router',\r\n    'app.shared',\r\n    'angular-loading-bar',\r\n    'ngAnimate'\r\n]).config(function($stateProvider, $urlRouterProvider){\r\n    $stateProvider\r\n        .state(\"notes\", {\r\n            url: \"/notes\",\r\n            template: '<notes></notes>',\r\n            authenticate:true\r\n        })\r\n        .state(\"login\", {\r\n            url: \"/login\",\r\n            template: '<login></login>',\r\n            authenticate:false\r\n        })\r\n        .state(\"register\", {\r\n            url:\"/register\",\r\n            template: '<register></register>',\r\n            authenticate:false\r\n        });\r\n\r\n        $urlRouterProvider.otherwise(\"/login\");\r\n\r\n}).run(function($rootScope, $state, authService){\r\n    $rootScope.$on(\"$stateChangeStart\", function(event, toState, toParams, fromState, fromParams){\r\n        \r\n            if(toState.authenticate && !authService.isLoggedIn()){\r\n                $state.transitionTo(\"login\");\r\n                event.preventDefault();\r\n            }      \r\n\r\n    });\r\n});","/// <reference path=\"../../../typings/index.d.ts\" />\n\nmodule app.login {\n\n    'use strict';\n\n    export interface ILoginCtrl {}\n\n    export class LoginCtrl implements ILoginCtrl {\n        static $inject = [\"$scope\", \"authService\"];\n        constructor(\n            public $scope: ng.IScope,\n            public authService: any\n        ){}\n    }\n\n    angular\n        .module('app.login', [])\n        .directive(\"login\", function(): ng.IDirective {\n            return {\n                templateUrl: 'app-templates/login/login.html',\n                controller:  LoginCtrl,\n                controllerAs: 'loginVM'\n            };\n        })\n        .controller(\"loginCtrl\", LoginCtrl);\n}\n","/// <reference path=\"../../../typings/index.d.ts\" />\n\nmodule app.notes {\n\n    export interface INotesCtrl { }\n\n    export interface INotesScope extends ng.IScope {\n        notes: Array<NoteContainer>;\n        newContainerName: string;\n    }\n\n    export class NotesCtrl implements INotesCtrl {\n        static $inject = [\"$scope\", \"notesService\", \"$http\"];\n\n        constructor(\n            public $scope: INotesScope,\n            public notesService: NotesService,\n            public $http: ng.IHttpService\n        ) {\n            //var notes = notesService.loadNotes();\n            var notes = new Array<NoteContainer>();\n            $scope.notes = notes;\n        }\n\n        onCheck = (note: Note, noteContainer: NoteContainer) => {\n            setTimeout(() => {\n                if (note.isComplete) {\n                    this.$scope.$apply(function () {\n                        noteContainer.notes = noteContainer.notes.filter((n) => { return n.id != note.id });\n                    });\n                }\n            }, 3000)\n\n\n        }\n\n        addNote = (noteContainer: NoteContainer) => {\n            if (noteContainer.newNote.content) {\n                noteContainer.notes.push(noteContainer.newNote)\n                noteContainer.newNote = new Note(noteContainer.notes.length, \"\");\n            }\n\n        }\n\n        addContainer = () => {\n            if (this.$scope.newContainerName) {\n                var container = new NoteContainer(this.$scope.notes.length, this.$scope.newContainerName);\n                this.$scope.notes.push(container);\n                this.$scope.newContainerName = \"\";\n            }\n        }\n\n        removeContainer = (noteContainer: NoteContainer) => {\n            if (noteContainer.notes.length != 0) {\n                if (confirm(\"Do you really want to delete this container\")) {\n                    this.$scope.notes = this.$scope.notes.filter((n) => { return n.id != noteContainer.id });\n\n                }\n            }\n            else {\n                this.$scope.notes = this.$scope.notes.filter((n) => { return n.id != noteContainer.id });\n            }\n        }\n    }\n\n    export interface INotesService {\n        // loadNotes(): Array<NoteContainer>;\n    }\n    export class NotesService implements INotesService {\n        \n    }\n\n    class NoteContainer {\n        id: number;\n        name: string;\n        notes: Array<Note>;\n        newNote: Note;\n\n        constructor(id: number, name: string) {\n            this.id = id;\n            this.name = name;\n            this.newNote = new Note(0, \"\");\n            this.notes = new Array<Note>();\n        }\n\n    }\n\n    class Note {\n        id: number;\n        isComplete: boolean;\n        content: string;\n\n        constructor(id: number, content: string, isComplete: boolean = false) {\n            this.id = id;\n            this.content = content;\n            this.isComplete = isComplete;\n        }\n    }\n\n    angular\n        .module('app.notes', [])\n        .directive(\"notes\", function (): ng.IDirective {\n            return {\n                templateUrl: 'app-templates/notes/notes.html',\n                controller: NotesCtrl,\n                controllerAs: 'notesVM'\n            };\n        })\n        .controller(\"notesCtrl\", NotesCtrl)\n        .factory(\"notesService\", [() => new app.notes.NotesService()]);\n}\n","/// <reference path=\"../../../typings/index.d.ts\" />\r\n\r\nmodule app.register {\r\n\r\n    'use strict';\r\n\r\n    export interface IRegisterCtrl {}\r\n\r\n    export class RegisterCtrl implements IRegisterCtrl {\r\n        static $inject = [\"$scope\", \"registerService\"];\r\n        constructor(\r\n            public $scope: ng.IScope,\r\n            public registerService: RegisterService\r\n        ){}\r\n    }\r\n\r\n    export interface IRegisterService {\r\n        register(username: string, password: string): void;\r\n    }\r\n    export class RegisterService implements IRegisterService {\r\n        public register = (username: string, password:string) =>{\r\n            console.log(username + \" \" + password);\r\n        }\r\n    }\r\n\r\n    angular\r\n        .module('app.register', [])\r\n        .directive(\"register\", function(): ng.IDirective {\r\n            return {\r\n                templateUrl: 'app-templates/register/register.html',\r\n                controller:  RegisterCtrl,\r\n                controllerAs: 'registerVM'\r\n            };\r\n        })\r\n        .controller(\"registerCtrl\", RegisterCtrl)\r\n        .factory(\"registerService\", [() => new app.register.RegisterService()]);\r\n}\r\n","/// <reference path=\"../../../typings/index.d.ts\" />\n\n\nmodule app.shared{\n\n    export interface IAuthService{\n        isLoggedIn(): boolean;\n        login(username: string, password: string): ng.IPromise<{}>;\n        logout(): void;\n    }\n\n    export class AuthService implements IAuthService{\n        private serviceBase: string = \"http://localhost:56361/\"\n        loggedIn: boolean = false;\n    \n\n        static $inject = [\"$http\", \"$q\", \"localStorageService\"];\n\n        constructor(public $http: ng.IHttpService, public $q: ng.IQService, \n            public localStorageService: any, public toastr: any){\n\n        }\n\n        isLoggedIn = () =>{\n            return this.loggedIn;\n        }   \n\n        login = (username: string, password: string) => {\n            var data = \"grant_type=password&username=\"+username+\"&password=\" + password;\n\n            var deferred = this.$q.defer();\n            \n            this.$http.post(this.serviceBase + 'token', data, {headers: {'Content-Type': 'application/x-www-form-urlencoded'}})\n                .success((response:any): void =>{\n                    //hier\n                    this.loggedIn = true;\n                    this.localStorageService.set('authorizationData', {token: response.access_token})\n\n                    deferred.resolve(response);\n                }).error((response:any) : void=>{\n                    if(!response){\n                        this.toastr.error(\"Server must be down...\", \"Error\");\n                    }\n                    console.log(response);\n                    this.logout();\n                });\n             \n             return deferred.promise;\n        }\n\n        logout = () =>{\n            this.localStorageService.remove('authorizationData');\n\n            this.loggedIn = false;\n        }\n\n        static factory(){\n            var instance = ($http: ng.IHttpService, $q: ng.IQService, localStorageService: any, toastr: any) => new AuthService($http, $q, localStorageService, toastr);\n\n            return instance;\n        }\n             \n    }\n\nangular\n        .module('app.shared', ['LocalStorageModule', 'toastr'])\n        .factory(\"authService\", AuthService.factory());\n}",null]}